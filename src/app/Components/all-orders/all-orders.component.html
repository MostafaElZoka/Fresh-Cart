<section class="bg-main-light shadow py-5 my-5 mx-auto w-75 rounded">
  <div class="container">
    <h2 class="text-center mb-4 h2">ðŸ“¦ Order History</h2>

    @for (order of orderItems; track order._id; let orderIndex = $index) {
      <div class="card mb-4 shadow-sm">
        <!-- Order Header -->
        <div class="card-header d-flex justify-content-between align-items-center">
          <span>
            <i class="fa-regular fa-calendar"></i>
            {{ orderItems[orderIndex].createdAt | date: 'mediumDate' }}
          </span>
          <span class="fw-bold">
            Total: {{ orderItems[orderIndex].totalOrderPrice | currency: "GBP" }}
          </span>
        </div>

        <!-- Order Items -->
        <div class="card-body p-0">
          @for (item of orderItems[orderIndex].cartItems; track item._id) {
            <div class="row g-3 align-items-center border-bottom px-3 py-3">
              <!-- Product Image -->
              <div class="col-3 col-md-2">
                <img [src]="item.product.imageCover"
                     [alt]="item.product.title"
                     class="img-fluid rounded shadow-sm">
              </div>

              <!-- Product Details -->
              <div class="col-9 col-md-6">
                <h3 class="h6 mb-1">{{ item.product.title }}</h3>
                <p class="text-main mb-2">
                  {{ item.price | currency:"GBP" }}
                </p>
              </div>

              <!-- Quantity -->
              <div class="col-12 col-md-4 d-flex justify-content-md-end align-items-center">
                <span class="badge bg-secondary fs-6">
                  Qty: {{ item.count }}
                </span>
              </div>
            </div>
          }
        </div>
      </div>
    }
  </div>
</section>
